<div class="resizable">
    <div class="resizable__wrapper">
        <div class="resizable__bar">
            <svg width="120" height="14" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="120" height="4" rx="2" fill="#434956"></rect><rect y="10" width="120" height="4" rx="2" fill="#434956"></rect></svg>
        </div>
        <div class="resizable__close-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M18.78 6.28a.75.75 0 00-1.06-1.06L12 10.94 6.28 5.22a.75.75 0 00-1.06 1.06L10.94 12l-5.72 5.72a.75.75 0 101.06 1.06L12 13.06l5.72 5.72a.75.75 0 101.06-1.06L13.06 12l5.72-5.72z"></path></svg>
        </div>
    </div>
    <iframe src="http://localhost:7681" width="100%" frameborder="0"></iframe>
</div>


<style>
    .resizable {
        visibility: hidden;
    }
    .resizable.active {
        visibility: visible;
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
    }
    .resizable__wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px 0;
        box-shadow: 0 5px 15px 0 rgba(0, 0, 0, .5);
        background-color: #2b2c30;
    }
    .resizable__bar {
        display: flex;
        justify-content: center;
        margin: 0 auto;
        cursor: row-resize;
    }
    .resizable__close-icon {
        align-self: flex-end;
        margin: 0 8px;
        cursor: pointer;
    }
</style>


<script>

window.addEventListener('DOMContentLoaded', () => {
    const resizable = document.querySelector('.resizable');
        const openPopupButton = document.getElementById('open-popup-button');
        const popupBar = document.querySelector('.resizable__wrapper');
        const popupIframe = document.querySelector('.resizable iframe');
        const popupCloseButton = document.querySelector('.resizable__close-icon');

        let isResizing = false;
        let initialMouseY;
        let initialHeight;

        const minHeight = 10;
        const maxHeight = 90;

        openPopupButton.addEventListener('click', () => {
            resizable.classList.toggle('active');
        });

        popupCloseButton.addEventListener('click', () => {
            resizable.classList.remove('active');
        });

        popupBar.addEventListener('mousedown', (e) => {
            if (e.touches && e.touches.length === 1) {
                isResizing = true;
                initialMouseY = e.touches[0].clientY;
                initialHeight = popupIframe.offsetHeight;

                window.addEventListener('touchmove', handleTouchMove);
                window.addEventListener('touchend', handleTouchEnd);
            } else {
                isResizing = true;
                initialMouseY = e.clientY;
                initialHeight = popupIframe.offsetHeight;

                window.addEventListener('mousemove', handleMouseMove);
            }
        });

        popupBar.addEventListener('mouseup', () => {
            isResizing = false;
            window.removeEventListener('mousemove', handleMouseMove);
            window.removeEventListener('touchmove', handleTouchMove);
            window.removeEventListener('touchend', handleTouchEnd);
        });

        // popupIframe.addEventListener('mouseenter', () => {
        //     isResizing = false;
        //     window.removeEventListener('mousemove', handleMouseMove);
        //     window.removeEventListener('touchmove', handleTouchMove);
        //     window.removeEventListener('touchend', handleTouchEnd);
        // })

        function handleMouseMove(e) {
            if (isResizing) {
                const deltaY = e.clientY - initialMouseY;
                const newHeight = Math.min(maxHeight * window.innerHeight / 100, Math.max(initialHeight - deltaY, minHeight * window.innerHeight / 100));

                popupIframe.style.height = `${newHeight}px`;
            }
        }

        function handleTouchMove(e) {
            if (isResizing && e.touches && e.touches.length === 1) {
                const deltaY = e.touches[0].clientY - initialMouseY;
                const newHeight = Math.min(maxHeight * window.innerHeight / 100, Math.max(initialHeight - deltaY, minHeight * window.innerHeight / 100));

                popupIframe.style.height = `${newHeight}px`;
            }
        }

        function handleTouchEnd() {
            if (isResizing) {
                isResizing = false;
                window.removeEventListener('touchmove', handleTouchMove);
                window.removeEventListener('touchend', handleTouchEnd);
            }
        }
    });

</script>